<div class="w-full max-w-lg mx-auto">
  @if (isLoading()) {
    <div class="text-center p-10">
      <p class="text-lg text-slate-500 dark:text-slate-400">Cargando encuesta...</p>
    </div>
  } @else if (poll(); as currentPoll) {
    <div class="bg-white dark:bg-slate-800 shadow-2xl rounded-2xl p-6 md:p-10 text-center transition-all duration-300">
      
      @if (hasVoted()) {
        <div class="py-10">
          <style>
            .checkmark__circle { stroke-dasharray: 166; stroke-dashoffset: 166; stroke-width: 3; stroke-miterlimit: 10; stroke: #4CAF50; fill: none; animation: stroke 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards; }
            .checkmark__check { transform-origin: 50% 50%; stroke-dasharray: 48; stroke-dashoffset: 48; stroke-width: 4; stroke: #4CAF50; animation: stroke 0.3s cubic-bezier(0.65, 0, 0.45, 1) 0.8s forwards; }
            @keyframes stroke { 100% { stroke-dashoffset: 0; } }
          </style>
          <svg class="w-24 h-24 mx-auto" viewBox="0 0 52 52">
            <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
            <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
          </svg>
          <h2 class="text-3xl font-bold mt-4 text-slate-700 dark:text-slate-200">Â¡Gracias por votar!</h2>
          <p class="text-slate-500 dark:text-slate-400 mt-2">Tu voto ha sido registrado. Puedes ver los resultados en la pantalla del presentador.</p>
        </div>
      } @else {
        <div>
          <h1 class="text-3xl md:text-4xl font-bold text-slate-800 dark:text-white mb-8">{{ currentPoll.question }}</h1>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-8">
            @for (option of currentPoll.options; track option.text; let i = $index) {
              <button (click)="vote(i)" class="w-full text-lg font-semibold p-6 rounded-lg transition-all transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-offset-slate-800 focus:ring-indigo-500 text-white bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 shadow-lg hover:shadow-xl">
                {{ option.text }}
              </button>
            }
          </div>
        </div>
      }
    </div>
  } @else {
     <div class="bg-white dark:bg-slate-800 shadow-2xl rounded-2xl p-10 text-center">
        <h2 class="text-3xl font-bold mt-4 text-red-500">Encuesta no encontrada</h2>
        <p class="text-slate-500 dark:text-slate-400 mt-2">Esta encuesta puede haber finalizado o el enlace es incorrecto.</p>
     </div>
  }
</div>